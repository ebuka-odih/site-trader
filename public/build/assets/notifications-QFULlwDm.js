import{r as c,j as t,c as M}from"./client-C3EM7bU6.js";const S=({notifications:u=[],csrfToken:d})=>{var y;const[a,l]=c.useState(u),[n,w]=c.useState("all"),[p,i]=c.useState(!1),[m,b]=c.useState(null),h=a.filter(e=>{var r;return n==="all"?!0:n==="unread"?!e.read_at:((r={deposits:["deposit","deposit_submitted","deposit_approved","deposit_completed"],withdrawals:["withdrawal","withdrawal_submitted","withdrawal_approved","withdrawal_completed"],trading:["trading","trade","copy_trade","copy_trade_started"],system:["system","account_reactivated","account_suspended"]}[n])==null?void 0:r.includes(e.type))||!1}),g=a.filter(e=>!e.read_at).length,j=e=>{const r={deposit:{bg:"bg-green-500/20",text:"text-green-400",icon:"plus"},deposit_submitted:{bg:"bg-green-500/20",text:"text-green-400",icon:"plus"},deposit_approved:{bg:"bg-green-500/20",text:"text-green-400",icon:"check"},deposit_completed:{bg:"bg-green-500/20",text:"text-green-400",icon:"check"},withdrawal:{bg:"bg-red-500/20",text:"text-red-400",icon:"minus"},withdrawal_submitted:{bg:"bg-red-500/20",text:"text-red-400",icon:"minus"},withdrawal_approved:{bg:"bg-red-500/20",text:"text-red-400",icon:"check"},withdrawal_completed:{bg:"bg-red-500/20",text:"text-red-400",icon:"check"},trading:{bg:"bg-blue-500/20",text:"text-blue-400",icon:"trending"},trade:{bg:"bg-blue-500/20",text:"text-blue-400",icon:"trending"},copy_trade:{bg:"bg-purple-500/20",text:"text-purple-400",icon:"copy"},copy_trade_started:{bg:"bg-purple-500/20",text:"text-purple-400",icon:"copy"},bot_trade:{bg:"bg-yellow-500/20",text:"text-yellow-400",icon:"bot"},bot_created:{bg:"bg-yellow-500/20",text:"text-yellow-400",icon:"bot"},bot_started:{bg:"bg-yellow-500/20",text:"text-yellow-400",icon:"bot"},system:{bg:"bg-gray-500/20",text:"text-gray-400",icon:"bell"},account_reactivated:{bg:"bg-green-500/20",text:"text-green-400",icon:"check"},account_suspended:{bg:"bg-red-500/20",text:"text-red-400",icon:"x"}}[e]||{bg:"bg-gray-500/20",text:"text-gray-400",icon:"bell"},o=()=>{switch(r.icon){case"plus":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})});case"minus":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})});case"check":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});case"trending":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})});case"copy":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})});case"bot":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})});case"x":return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});default:return t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}};return t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl ${r.bg} ${r.text} flex-shrink-0`,children:o()})},v=e=>{if(!(e!=null&&e.status))return null;const r={active:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},suspended:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},completed:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30"},pending:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},approved:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30"},rejected:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"}}[e.status.toLowerCase()]||{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-500/30"};return t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border ${r.bg} ${r.text} ${r.border}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})},N=e=>{if(!e)return"Just now";const s=new Date(e),o=Math.floor((new Date-s)/1e3);return o<60?"Just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<604800?`${Math.floor(o/86400)}d ago`:o<2592e3?`${Math.floor(o/604800)}w ago`:o<31536e3?`${Math.floor(o/2592e3)}mo ago`:`${Math.floor(o/31536e3)}y ago`},k=async e=>{try{(await fetch(`/user/notifications/${e}/read`,{method:"POST",headers:{"X-CSRF-TOKEN":d,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).ok&&l(a.map(r=>r.id===e?{...r,read_at:new Date().toISOString()}:r))}catch(s){console.error("Error marking notification as read:",s)}},_=async e=>{b(e);try{(await fetch(`/user/notifications/${e}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":d,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).ok&&l(a.filter(r=>r.id!==e))}catch(s){console.error("Error deleting notification:",s)}finally{b(null)}},C=async()=>{if(g!==0){i(!0);try{(await fetch("/user/notifications/mark-all-read",{method:"POST",headers:{"X-CSRF-TOKEN":d,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).ok&&l(a.map(s=>({...s,read_at:s.read_at||new Date().toISOString()})))}catch(e){console.error("Error marking all as read:",e)}finally{i(!1)}}},L=async()=>{if(a.length!==0&&window.confirm("Are you sure you want to clear all notifications? This action cannot be undone.")){i(!0);try{(await fetch("/user/notifications/clear-all",{method:"DELETE",headers:{"X-CSRF-TOKEN":d,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).ok&&l([])}catch(e){console.error("Error clearing all notifications:",e)}finally{i(!1)}}},f=[{id:"all",label:"All",count:a.length},{id:"unread",label:"Unread",count:g},{id:"deposits",label:"Deposits"},{id:"withdrawals",label:"Withdrawals"},{id:"trading",label:"Trading"},{id:"system",label:"System"}];return t.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Stay updated with your account activities"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:C,disabled:p||g===0,className:"px-4 py-2 text-sm font-medium rounded-lg border border-border bg-background text-foreground hover:bg-card transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-background",children:p?"Processing...":"Mark All Read"}),t.jsx("button",{onClick:L,disabled:p||a.length===0,className:"px-4 py-2 text-sm font-medium rounded-lg bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-500/20",children:"Clear All"})]})]}),t.jsx("div",{className:"border-b border-border",children:t.jsx("nav",{className:"-mb-px flex space-x-1 overflow-x-auto",children:f.map(e=>t.jsxs("button",{onClick:()=>w(e.id),className:`relative py-3 px-4 font-medium text-sm whitespace-nowrap transition-colors rounded-t-lg ${n===e.id?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-card/50"}`,children:[e.label,e.count!==void 0&&e.count>0&&t.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-semibold ${n===e.id?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:e.count})]},e.id))})}),t.jsx("div",{className:"space-y-3",children:h.length>0?h.map(e=>t.jsx("div",{className:`group rounded-xl border bg-card p-5 transition-all hover:border-primary/30 ${e.read_at?"border-border":"border-primary/30 border-l-4 border-l-primary bg-primary/5"}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[j(e.type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"flex items-start justify-between gap-4",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h3",{className:`text-base font-semibold ${e.read_at?"text-foreground/90":"text-foreground"}`,children:e.title}),!e.read_at&&t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-primary/20 text-primary",children:"New"})]}),t.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.message}),e.data&&Object.keys(e.data).length>0&&t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.data.amount&&t.jsxs("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-primary/10 border border-primary/20",children:[t.jsxs("span",{className:"text-sm font-semibold text-primary",children:["$",parseFloat(e.data.amount).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.data.currency&&e.data.currency!=="USD"&&t.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:e.data.currency})]}),v(e.data)]})]})}),t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:N(e.created_at)}),t.jsxs("div",{className:"flex items-center gap-2",children:[!e.read_at&&t.jsx("button",{onClick:()=>k(e.id),className:"px-3 py-1.5 text-xs font-medium rounded-lg border border-border bg-background text-foreground hover:bg-card transition-colors",children:"Mark Read"}),t.jsx("button",{onClick:()=>_(e.id),disabled:m===e.id,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m===e.id?"Deleting...":"Delete"})]})]})]})]})},e.id)):t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl bg-muted/50 border border-border",children:t.jsx("svg",{className:"h-10 w-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:n==="all"?"You're all caught up! New notifications will appear here.":`No ${(y=f.find(e=>e.id===n))==null?void 0:y.label.toLowerCase()} notifications found.`})]})})]})},x=document.getElementById("react-notifications");if(x){const u=x.dataset.props?JSON.parse(x.dataset.props):{};M.createRoot(x).render(t.jsx(S,{...u}))}
